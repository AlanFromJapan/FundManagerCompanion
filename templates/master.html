<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Fund Manager{% endblock %}</title>
    <link rel="stylesheet" href="/css/style.css" type="text/css" />
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>
    {% block head %}{% endblock %}
</head>
<body>

<!-- Have to define Macro here to be available in all pages -->
{% macro xact_table(xact, options) -%}
    <div>
        <table>
            <thead>
                <tr>
                    {% if options.show_fund %}
                    <th>Fund</th>
                    {% endif %}
                    <th>Date</th>
                    <th>Type</th>
                    <th>Quantity</th>
                    <th>Amount</th>
                    <th>Price/10k unit</th>

                </tr>
            </thead>
            <tbody>
                {% for item in xact %}
                <tr>
                    {% if options.show_fund %}
                    <td><a href="/funds/{{ item.fundid }}">{{ item.fundname }}</a></td>
                    {% endif %}
                    <td>{{ item.trade_date }}</td>
                    <td>{{ item.xtype.to_emoji() }} {{ item.xtype.to_short() }}</td>
                    <td class="rightalign">{{ "{:,.0f}".format(item.unit) }}</td>
                    <td class="rightalign">{{ "{:,.0f}".format(item.amount) }}円</td>
                    <td class="rightalign">{{ "{:,.0f}".format(item.unit_price) }}円</td>

                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{%- endmacro %}
    
    <header>
        <h1>Fund Manager Companion</h1>
        <nav>
            <ul style="list-style: none; padding: 0; margin: 0;">
                <li style="display: inline; margin-right: 1em;"><a href="{{ url_for('home_page') }}">Home</a></li>
                <li style="display: inline; margin-right: 1em;"><a href="{{ url_for('show_funds_page') }}">Funds</a></li>
                <li style="display: inline; margin-right: 1em;"><a href="{{ url_for('bp_transactions.transactions_page') }}">Transactions</a></li>
                <li style="display: inline; margin-right: 1em;"><a href="#">Holdings</a></li>
                <li style="display: inline; margin-right: 1em;"><a href="{{ url_for('bp_admin.admin_page') }}">Admin</a></li>

            </ul>
        </nav>
    </header>
    <main id="main">

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div id="flash-messages">
                    {% for category, message in messages %}
                        <div class="flash flash-{{ category }}" style="margin-bottom:1em; padding:0.7em 1em; border-radius:5px; background:#ffeeba; color:#856404; border:1px solid #ffeeba;">
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
        
        {% block body_content %}{% endblock %}
    </main>
</body>
</html>
